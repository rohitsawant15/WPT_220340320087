<html>
  <script src="jquery-3.5.1.min.js"></script>
  <script>
    //our scrip will come here
    $("#viewall").click(() => {
      let input = { bookid: $("#bookid").val() };
      let parameterstofunction = {
        data: input,
        url: "",
        type: "get",
        dataType: "json",
        success: (datagivenbyserver) => {
          console.log(datagivenbyserver);
          let htmldisplay = "";
          for (let i = 0; i < datagivenbyserver.length; i++) {
            htmldisplay +=
              datagivenbyserver[i].bookid +
              " " +
              datagivenbyserver[i].bookname +
              " " +
              datagivenbyserver[i].price;
          }
          $("#display").html(htmldisplay);
          $("#msg").text("Items displayed");
        },
        error: (errorgivenbyserver) => {
          console.log("Failed to contact");
        },
      };
      $.ajax(parameterstofunction);
    });
    // $("#bookid").blur(() => {
    //   let bookid = $("#bookid").val();
    // });

    $(document).ready(function () {
      console.log("no more sins");
      $("#add").click(function () {
        console.log("jquery works");
        if (
          $("bookid").val() != "" &&
          $("#bookname").val() != "" &&
          $("#price").val != ""
        ) {
          let input = {
            bookid: $("#bookid").val(),
            bookname: $("#bookname").val(),
            price: $("#price").val(),
          };
          let parameterstofunction = {
            data: input,
            url: "http://localhost:8081/addbook",
            type: "get",
            dataType: "json",
            success: (datagivenbyserver) => {
              console.log(datagivenbyserver);
              if (datagivenbyserver) {
                $("#msg").text("Book added ...");
              } else {
                $("#msg").text("Error");
              }
            },
            error: (errorgivenbyserver) => {
              console.log("Failed to contact server");
            },
          };
          $.ajax(parameterstofunction);
        } else {
          $("#msg").text("Enter all values");
        }
        // alert("jquery works");
      });
    });
  </script>
  <body>
    <span>Book Id</span>
    <input type="text" id="id" name="bookid" placeholder="Bookid" />
    <span id="msg">Message</span><br /><br />
    <span>Book Name</span>
    <input type="text" name="name" id="name" placeholder="Book name" /><br />
    <span>price</span>
    <input type="text" name="proce" id="price" placeholder="price" /><br />
    <input type="button" value="Add a Book" id="add" />
    <!-- <form action="poc2" method="get">
      <br />Book id<input type="text" name="whocares" />
      <input type="submit" value="get" />
    </form>

    <form action="poc1" method="post">
      <br />book name<input type="text" name="whocares" />
      <input type="submit" value="post" />
    </form>
    <form action="poc1" method="post">
      <br />price<input type="text" name="whocares" />
      <input type="submit" value="post" />
    </form>

    <button id="add">add a book</button> -->
  </body>
</html>
